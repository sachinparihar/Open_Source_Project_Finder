{"ast":null,"code":"var _jsxFileName = \"/home/kali/Open_Source_Project_Finder/frontend/src/pages/SearchPage.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport ProjectCard from '../components/ProjectCard';\nimport api from '../services/api';\nimport { useAuth } from '../context/AuthContext';\nimport '../Styles/SearchPage.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function SearchPage() {\n  _s();\n  const {\n    userId,\n    isAuthenticated\n  } = useAuth();\n  const [query, setQuery] = useState('');\n  const [language, setLanguage] = useState('');\n  const [topic, setTopic] = useState('');\n  const [results, setResults] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState('');\n  useEffect(() => {\n    const timer = setTimeout(() => {\n      if (query.trim() || language.trim() || topic.trim()) {\n        setLoading(true);\n        setError('');\n        api.getProjects({\n          q: query,\n          language,\n          topic\n        }, userId) // Pass userId here\n        .then(res => {\n          setResults(Array.isArray(res.data) ? res.data : []);\n        }).catch(() => {\n          setError('Failed to fetch projects.');\n          setResults([]);\n        }).finally(() => setLoading(false));\n      } else {\n        setResults([]);\n      }\n    }, 400);\n    return () => clearTimeout(timer);\n  }, [query, language, topic, userId]); // Add userId to dependencies\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"search-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      className: \"search-title\",\n      children: \"Search Projects\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"search-bar\",\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        value: query,\n        onChange: e => setQuery(e.target.value),\n        placeholder: \"Search by name or description\",\n        className: \"search-input\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 43,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        value: language,\n        onChange: e => setLanguage(e.target.value),\n        placeholder: \"Language (e.g. Go)\",\n        className: \"search-input\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 50,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        value: topic,\n        onChange: e => setTopic(e.target.value),\n        placeholder: \"Topic (e.g. cloud)\",\n        className: \"search-input\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 7\n    }, this), loading && /*#__PURE__*/_jsxDEV(\"div\", {\n      children: \"Loading...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 19\n    }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        color: 'red'\n      },\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 17\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"results\",\n      children: [results.length === 0 && !loading && (query || language || topic) && /*#__PURE__*/_jsxDEV(\"div\", {\n        children: \"No projects found.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 11\n      }, this), results.map(proj => /*#__PURE__*/_jsxDEV(ProjectCard, {\n        project: {\n          ...proj,\n          bookmark_id: proj.bookmark_id // This will now be included from backend\n        }\n      }, proj.id || proj.url, false, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 11\n      }, this))]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 40,\n    columnNumber: 5\n  }, this);\n}\n_s(SearchPage, \"i9XAbsGyFP6QrLQwwU0KX1umGPE=\", false, function () {\n  return [useAuth];\n});\n_c = SearchPage;\nvar _c;\n$RefreshReg$(_c, \"SearchPage\");","map":{"version":3,"names":["React","useState","useEffect","ProjectCard","api","useAuth","jsxDEV","_jsxDEV","SearchPage","_s","userId","isAuthenticated","query","setQuery","language","setLanguage","topic","setTopic","results","setResults","loading","setLoading","error","setError","timer","setTimeout","trim","getProjects","q","then","res","Array","isArray","data","catch","finally","clearTimeout","className","children","fileName","_jsxFileName","lineNumber","columnNumber","type","value","onChange","e","target","placeholder","style","color","length","map","proj","project","bookmark_id","id","url","_c","$RefreshReg$"],"sources":["/home/kali/Open_Source_Project_Finder/frontend/src/pages/SearchPage.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport ProjectCard from '../components/ProjectCard';\nimport api from '../services/api';\nimport { useAuth } from '../context/AuthContext';\nimport '../Styles/SearchPage.css';\n\nexport default function SearchPage() {\n  const { userId, isAuthenticated } = useAuth();\n  const [query, setQuery] = useState('');\n  const [language, setLanguage] = useState('');\n  const [topic, setTopic] = useState('');\n  const [results, setResults] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState('');\n\n  useEffect(() => {\n    const timer = setTimeout(() => {\n      if (query.trim() || language.trim() || topic.trim()) {\n        setLoading(true);\n        setError('');\n        api\n          .getProjects({ q: query, language, topic }, userId) // Pass userId here\n          .then(res => {\n            setResults(Array.isArray(res.data) ? res.data : []);\n          })\n          .catch(() => {\n            setError('Failed to fetch projects.');\n            setResults([]);\n          })\n          .finally(() => setLoading(false));\n      } else {\n        setResults([]);\n      }\n    }, 400);\n\n    return () => clearTimeout(timer);\n  }, [query, language, topic, userId]); // Add userId to dependencies\n\n  return (\n    <div className=\"search-container\">\n      <h2 className=\"search-title\">Search Projects</h2>\n      <div className=\"search-bar\">\n        <input\n          type=\"text\"\n          value={query}\n          onChange={e => setQuery(e.target.value)}\n          placeholder=\"Search by name or description\"\n          className=\"search-input\"\n        />\n        <input\n          type=\"text\"\n          value={language}\n          onChange={e => setLanguage(e.target.value)}\n          placeholder=\"Language (e.g. Go)\"\n          className=\"search-input\"\n        />\n        <input\n          type=\"text\"\n          value={topic}\n          onChange={e => setTopic(e.target.value)}\n          placeholder=\"Topic (e.g. cloud)\"\n          className=\"search-input\"\n        />\n      </div>\n\n      {loading && <div>Loading...</div>}\n      {error && <div style={{ color: 'red' }}>{error}</div>}\n\n      <div className=\"results\">\n        {results.length === 0 && !loading && (query || language || topic) && (\n          <div>No projects found.</div>\n        )}\n        {results.map(proj => (\n          <ProjectCard \n            key={proj.id || proj.url} \n            project={{\n              ...proj,\n              bookmark_id: proj.bookmark_id // This will now be included from backend\n            }} \n          />\n        ))}\n      </div>\n    </div>\n  );\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}